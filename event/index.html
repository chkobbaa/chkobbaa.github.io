<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rat-7</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        #canvas-container { flex: 1; width: 100%; position: relative; }
        #info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        #info-panel h2 { margin-bottom: 10px; font-size: 1.2rem; color: #4fc3f7; }
        #info-panel p { margin-bottom: 15px; line-height: 1.4; }
        #controls { display: flex; gap: 10px; }
        button {
            background: #4fc3f7; border: none; color: white;
            padding: 8px 12px; border-radius: 5px; cursor: pointer; transition: all 0.3s;
        }
        button:hover { background: #29b6f6; transform: translateY(-2px); }
        #loading {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: white; font-size: 1.5rem; text-align: center;
            background: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px; z-index: 100;
        }
        .loader {
            width: 48px; height: 48px; border: 5px solid rgba(255,255,255,0.3);
            border-radius: 50%; border-top-color: #4fc3f7; animation: spin 1s ease-in-out infinite; margin: 0 auto 15px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="canvas-container">
        <div id="loading">
            <div class="loader"></div>
            Loading 3D Models...
        </div>
    </div>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>

    <script>
        let scene, camera, renderer, controls;
        let model1, model2;
        let autoRotate = true;

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a2e);

            camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 5, 10);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.outputEncoding = THREE.sRGBEncoding;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1;
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.autoRotate = 0;
            controls.autoRotateSpeed = 1.0;

            
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            
            const directions = [
                [1,0,0], [-1,0,0], [0,1,0], [0,-1,0], [0,0,1], [0,0,-1]
            ];
            directions.forEach(dir => {
                const light = new THREE.DirectionalLight(0xffffff, 0.2);
                light.position.set(...dir);
                scene.add(light);
            });

            
            const loader = new THREE.GLTFLoader();
            loader.load('paper1.gltf', gltf => {
                model1 = gltf.scene;
                scene.add(model1);

                const box = new THREE.Box3().setFromObject(model1);
                const center = box.getCenter(new THREE.Vector3());
                model1.position.sub(center);

                adjustCamera(box);

                
                loader.load('lactic.glb', gltf2 => {
                    model2 = gltf2.scene;
                    scene.add(model2);

                    
                    model2.rotation.y = 0;         
                    model2.scale.set(0.1,0.1,0.1); 

                    
                    const box2 = new THREE.Box3().setFromObject(model2);
                    const center2 = box2.getCenter(new THREE.Vector3());
                    model2.position.sub(center2);
                    model2.position.set(0.33, .36, 0); 

                    document.getElementById('loading').style.display = 'none';
                }, undefined, err2 => {
                    console.error('Error loading second model:', err2);
                });

            }, undefined, err => {
                console.error('Error loading first model:', err);
            });

            window.addEventListener('resize', onWindowResize);


            animate();
        }

        function adjustCamera(box) {
            const size = box.getSize(new THREE.Vector3());
            const maxDim = Math.max(size.x, size.y, size.z);
            const fov = camera.fov * (Math.PI / 180);
            let cameraZ = Math.abs(maxDim / Math.sin(fov / 2) -5.5);
            cameraZ *= 1.5; 
            camera.position.z = cameraZ;
            camera.position.y = maxDim / 2;
            controls.update();
        }


        function onWindowResize() {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            if (model2) {
                model2.rotation.y += 0.01; 
            }

            controls.update();
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>
